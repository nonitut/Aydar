(self.webpackChunkrm_frontend=self.webpackChunkrm_frontend||[]).push([[61,12,13,60,59],{964:function(t,e,r){"use strict";var o,a,n,i,s,l,c=r(351);e.Z=(a={},n="template-common-alert",i=(0,c.f)(o||(s=["\n\t<%\n\t\tvar categories = {\n\t\t\t'type-duplicate':\t\t\t\t'category-upgrade',\n\t\t\t'type-create':\t\t\t\t\t'category-upgrade',\n\t\t\t'type-export-pdf':\t\t\t\t'category-upgrade',\n\t\t\t'type-export-code':\t\t\t\t'category-upgrade',\n\t\t\t'type-more-pages':\t\t\t\t'category-upgrade',\n\t\t\t'type-upload-fonts':\t\t\t'category-upgrade',\n\t\t\t'type-custom-seo':\t\t\t\t'category-upgrade',\n\t\t\t'type-custom-sharing':\t\t\t'category-upgrade',\n\t\t\t'type-code-injection':\t\t\t'category-upgrade',\n\t\t\t'type-widget-shots':\t\t\t'category-upgrade',\n\t\t\t'type-publish-noemail':\t\t\t'category-confirm-email',\n\t\t\t'type-publish-limit':\t\t\t'category-upgrade',\n\t\t\t'type-publish-ecommerce':\t\t\t'category-upgrade',\n\t\t\t'type-switch-desktop-create':\t'category-mobile',\n\t\t\t'type-switch-desktop-continue':\t'category-mobile',\n\t\t\t'type-browsers':\t\t\t\t'category-browsers',\n\t\t\t'type-browsers-viewer':\t\t\t\t'category-browsers',\n\t\t\t'type-shared-failed':\t\t\t'category-shared-failed',\n\t\t\t'type-shared-unlock-page':\t\t'category-shared-unlock-page',\n\t\t};\n\n\t\tvar headers = {\n\t\t\t'category-upgrade':\t\t\t'',\n\t\t\t'category-upgrade-skip':\t'Push the Limits',\n\t\t\t'category-browsers':\t\t'Browser Support',\n\t\t\t'category-shared-failed':\t'Sorry, something<br/>went wrong.',\n\t\t\t'category-confirm-email':\t'Account Activation',\n\t\t};\n\n\t\tvar pricingUrl = readymagHost + \"/pricing\";\n\n\t\tvar texts = {\n\t\t\t'type-duplicate':\t\t\t\t'To duplicate this project you need to upgrade your account. You can find out more about our subscription plans <a href=' + pricingUrl + ' class=\"learn-more\">here</a>.',\n\t\t\t'type-create':\t\t\t\t\t'To create more projects you need to upgrade your account. You can find out more about our subscription plans <a href=' + pricingUrl + ' class=\"learn-more\">here</a>.',\n\t\t\t'type-publish-noemail':\t\t\t'Please verify your email address<br />to publish this project.',\n\t\t\t'type-publish-limit':\t\t\t'Please upgrade your account<br />to publish more than one project.',\n\t\t\t'type-publish-ecommerce': 'Please upgrade your account<br />to publish project with ecommerce.',\n\t\t\t'type-export-pdf':\t\t\t\t'Please upgrade your account<br/>to export the project to PDF.<br/><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-export-code':\t\t\t\t'Please upgrade your account<br/>in order to export the source<br/>code of your projects.<br/><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-more-pages':\t\t\t\t'Please upgrade your account<br/>to create more pages.<br><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-custom-seo':\t\t\t\t'Please upgrade your account<br/> to customize SEO parameters.<br/><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-custom-sharing':\t\t\t'Please upgrade your account<br/>to customize social sharing info.<br/><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-code-injection':\t\t\t'Please upgrade your account to<br/>make custom code work after<br/>you publish the project.<br/><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-widget-shots':\t\t\t'Please upgrade your account to<br/>make Shots widget work after<br/>you publish the project.<br/><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-browsers':\t\t\t\t'Sorry, our Editor doesn’t support Internet Explorer. This may change in the future, but for now please use Chrome, Firefox or Safari.',\n\t\t\t'type-browsers-viewer':\t\t\t'This site can't be displayed in Internet Explorer. Please switch to <a href=\"https://support.apple.com/en-jo/HT204416\">Safari</a>, <a href=\"https://www.google.com/chrome/\">Google Chrome</a>, <a href=\"https://www.mozilla.org/en-US/firefox/new/\">Firefox</a>, or <a href=\"https://www.microsoft.com/en-us/windows/microsoft-edge\">Microsoft Edge</a>.',\n\t\t\t'type-switch-desktop-create':\t'To create a project, please use your laptop or desktop computer.',\n\t\t\t'type-switch-desktop-continue':\t'To continue, please use your laptop or desktop computer.',\n\t\t\t'type-shared-failed':\t\t\t'Please contact <a href=\"mailto:support@readymag.com\" class=\"learn-more\">support</a>.',\n\t\t\t'type-upload-fonts':\t\t\t'Please upgrade your account<br/>to upload your own fonts.<br/><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t};\n\n\t\tvar buttons = {\n\t\t\t'category-upgrade':\t\t\t\t'<a href=\"/settings#change-plan\" class=\"button main upgrade\">Upgrade</a><div class=\"cancel-wrapper\">or ' + (['type-code-injection', 'type-widget-shots'].includes(opts.type) ? '<span class=\"button cancel\" data-type=\"skip\">Skip</span>' : '<span class=\"button cancel\">Cancel</span>') + '</div>',\n\t\t\t'category-browsers':\t\t\t'<div class=\"button main ok\">Okay</div>',\n\t\t\t'category-mobile':\t\t\t\t'<div class=\"button main ok\">Okay</div>',\n\t\t\t'category-shared-failed':\t\t'<div class=\"button close\">Close</div>',\n\t\t\t'category-shared-unlock-page':\t'<div class=\"button ok\">Ok</div>',\n\t\t\t'category-confirm-email':\t\t'<div  class=\"button main resend\">Resend</div><div class=\"cancel-wrapper\">or <span class=\"button cancel\">Cancel</span></div>',\n\t\t};\n\n\t\tvar category = categories[opts.type]\n\t\tvar header = headers[category]\n\t\tvar text = texts[opts.type] || opts.text\n\t\tvar button = buttons[category]\n\n\t\tif (opts.is_contributor) {\n\t\t\ttext = 'Please upgrade owner’s account<br/>to be able to use this feature.'\n\t\t\tbutton = '<a href=\"mailto:' + opts.owner_email + '\" class=\"contact-link\">Contact owner</a><div class=\"cancel-wrapper\">' + (['type-code-injection', 'type-widget-shots'].includes(opts.type) ? 'or <span class=\"button cancel\" data-type=\"skip\">Skip</span>' : '<span class=\"button cancel\">Cancel</span>') + '</div>'\n\t\t}\n\n\t%>\n\n\t<div class=\"alert-popup <%=category%>\">\n\t\t<div class=\"panel-wrapper\">\n\t\t\t<div class=\"center-table\">\n\t\t\t\t<div class=\"center-cell\">\n\t\t\t\t\t<div class=\"panel\">\n\n\t\t\t\t\t\t<%=(header ? '<div class=\"header\">' + header + '</div>' : '')%>\n\n\t\t\t\t\t\t<div class=\"icon\" <%=(opts.icon ? 'style=\"background-image:url(' + opts.icon + ')\"' : \"\")%>><div class=\"icon-inner\"></div></div>\n\n\t\t\t\t\t\t<%=(text ? '<div class=\"text\">' + text + '</div>' : '')%>\n\n\t\t\t\t\t\t<%=(opts.type == 'type-browsers-viewer' ? '<div class=\"icon additional\"></div>' : '')%>\n\n\t\t\t\t\t\t<%=(button ? '<div class=\"buttons\">' + button + '</div>' : '')%>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n"],(l=["\n\t<%\n\t\tvar categories = {\n\t\t\t'type-duplicate':\t\t\t\t'category-upgrade',\n\t\t\t'type-create':\t\t\t\t\t'category-upgrade',\n\t\t\t'type-export-pdf':\t\t\t\t'category-upgrade',\n\t\t\t'type-export-code':\t\t\t\t'category-upgrade',\n\t\t\t'type-more-pages':\t\t\t\t'category-upgrade',\n\t\t\t'type-upload-fonts':\t\t\t'category-upgrade',\n\t\t\t'type-custom-seo':\t\t\t\t'category-upgrade',\n\t\t\t'type-custom-sharing':\t\t\t'category-upgrade',\n\t\t\t'type-code-injection':\t\t\t'category-upgrade',\n\t\t\t'type-widget-shots':\t\t\t'category-upgrade',\n\t\t\t'type-publish-noemail':\t\t\t'category-confirm-email',\n\t\t\t'type-publish-limit':\t\t\t'category-upgrade',\n\t\t\t'type-publish-ecommerce':\t\t\t'category-upgrade',\n\t\t\t'type-switch-desktop-create':\t'category-mobile',\n\t\t\t'type-switch-desktop-continue':\t'category-mobile',\n\t\t\t'type-browsers':\t\t\t\t'category-browsers',\n\t\t\t'type-browsers-viewer':\t\t\t\t'category-browsers',\n\t\t\t'type-shared-failed':\t\t\t'category-shared-failed',\n\t\t\t'type-shared-unlock-page':\t\t'category-shared-unlock-page',\n\t\t};\n\n\t\tvar headers = {\n\t\t\t'category-upgrade':\t\t\t'',\n\t\t\t'category-upgrade-skip':\t'Push the Limits',\n\t\t\t'category-browsers':\t\t'Browser Support',\n\t\t\t'category-shared-failed':\t'Sorry, something<br/>went wrong.',\n\t\t\t'category-confirm-email':\t'Account Activation',\n\t\t};\n\n\t\tvar pricingUrl = readymagHost + \"/pricing\";\n\n\t\tvar texts = {\n\t\t\t'type-duplicate':\t\t\t\t'To duplicate this project you need to upgrade your account. You can find out more about our subscription plans <a href=' + pricingUrl + ' class=\"learn-more\">here</a>.',\n\t\t\t'type-create':\t\t\t\t\t'To create more projects you need to upgrade your account. You can find out more about our subscription plans <a href=' + pricingUrl + ' class=\"learn-more\">here</a>.',\n\t\t\t'type-publish-noemail':\t\t\t'Please verify your email address<br />to publish this project.',\n\t\t\t'type-publish-limit':\t\t\t'Please upgrade your account<br />to publish more than one project.',\n\t\t\t'type-publish-ecommerce': 'Please upgrade your account<br />to publish project with ecommerce.',\n\t\t\t'type-export-pdf':\t\t\t\t'Please upgrade your account<br/>to export the project to PDF.<br/><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-export-code':\t\t\t\t'Please upgrade your account<br/>in order to export the source<br/>code of your projects.<br/><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-more-pages':\t\t\t\t'Please upgrade your account<br/>to create more pages.<br><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-custom-seo':\t\t\t\t'Please upgrade your account<br/> to customize SEO parameters.<br/><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-custom-sharing':\t\t\t'Please upgrade your account<br/>to customize social sharing info.<br/><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-code-injection':\t\t\t'Please upgrade your account to<br/>make custom code work after<br/>you publish the project.<br/><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-widget-shots':\t\t\t'Please upgrade your account to<br/>make Shots widget work after<br/>you publish the project.<br/><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t\t'type-browsers':\t\t\t\t'Sorry, our Editor doesn’t support Internet Explorer. This may change in the future, but for now please use Chrome, Firefox or Safari.',\n\t\t\t'type-browsers-viewer':\t\t\t'This site can\\'t be displayed in Internet Explorer. Please switch to <a href=\"https://support.apple.com/en-jo/HT204416\">Safari</a>, <a href=\"https://www.google.com/chrome/\">Google Chrome</a>, <a href=\"https://www.mozilla.org/en-US/firefox/new/\">Firefox</a>, or <a href=\"https://www.microsoft.com/en-us/windows/microsoft-edge\">Microsoft Edge</a>.',\n\t\t\t'type-switch-desktop-create':\t'To create a project, please use your laptop or desktop computer.',\n\t\t\t'type-switch-desktop-continue':\t'To continue, please use your laptop or desktop computer.',\n\t\t\t'type-shared-failed':\t\t\t'Please contact <a href=\"mailto:support@readymag.com\" class=\"learn-more\">support</a>.',\n\t\t\t'type-upload-fonts':\t\t\t'Please upgrade your account<br/>to upload your own fonts.<br/><a href=' + pricingUrl + ' class=\"learn-more\">See the pricing</a>.',\n\t\t};\n\n\t\tvar buttons = {\n\t\t\t'category-upgrade':\t\t\t\t'<a href=\"/settings#change-plan\" class=\"button main upgrade\">Upgrade</a><div class=\"cancel-wrapper\">or ' + (['type-code-injection', 'type-widget-shots'].includes(opts.type) ? '<span class=\"button cancel\" data-type=\"skip\">Skip</span>' : '<span class=\"button cancel\">Cancel</span>') + '</div>',\n\t\t\t'category-browsers':\t\t\t'<div class=\"button main ok\">Okay</div>',\n\t\t\t'category-mobile':\t\t\t\t'<div class=\"button main ok\">Okay</div>',\n\t\t\t'category-shared-failed':\t\t'<div class=\"button close\">Close</div>',\n\t\t\t'category-shared-unlock-page':\t'<div class=\"button ok\">Ok</div>',\n\t\t\t'category-confirm-email':\t\t'<div  class=\"button main resend\">Resend</div><div class=\"cancel-wrapper\">or <span class=\"button cancel\">Cancel</span></div>',\n\t\t};\n\n\t\tvar category = categories[opts.type]\n\t\tvar header = headers[category]\n\t\tvar text = texts[opts.type] || opts.text\n\t\tvar button = buttons[category]\n\n\t\tif (opts.is_contributor) {\n\t\t\ttext = 'Please upgrade owner’s account<br/>to be able to use this feature.'\n\t\t\tbutton = '<a href=\"mailto:' + opts.owner_email + '\" class=\"contact-link\">Contact owner</a><div class=\"cancel-wrapper\">' + (['type-code-injection', 'type-widget-shots'].includes(opts.type) ? 'or <span class=\"button cancel\" data-type=\"skip\">Skip</span>' : '<span class=\"button cancel\">Cancel</span>') + '</div>'\n\t\t}\n\n\t%>\n\n\t<div class=\"alert-popup <%=category%>\">\n\t\t<div class=\"panel-wrapper\">\n\t\t\t<div class=\"center-table\">\n\t\t\t\t<div class=\"center-cell\">\n\t\t\t\t\t<div class=\"panel\">\n\n\t\t\t\t\t\t<%=(header ? '<div class=\"header\">' + header + '</div>' : '')%>\n\n\t\t\t\t\t\t<div class=\"icon\" <%=(opts.icon ? 'style=\"background-image:url(' + opts.icon + ')\"' : \"\")%>><div class=\"icon-inner\"></div></div>\n\n\t\t\t\t\t\t<%=(text ? '<div class=\"text\">' + text + '</div>' : '')%>\n\n\t\t\t\t\t\t<%=(opts.type == 'type-browsers-viewer' ? '<div class=\"icon additional\"></div>' : '')%>\n\n\t\t\t\t\t\t<%=(button ? '<div class=\"buttons\">' + button + '</div>' : '')%>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n"])||(l=s.slice(0)),o=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(l)}})))),n in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i,a)},1508:function(t,e,r){"use strict";var o,a,n,i=r(351);function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}e.Z=(s(n={},"template-common-login",(0,i.f)(o||(o=l(['\n\n\t<div class="login-popup hidden">\n\n\t\t<div class="login-popup-wrapper">\n\t\t\t<div class="login ljr-panel hidden">\n        <div class="header"><a href="/join/" class="link">Join</a> or <span>Log in</span></div>\n\t\t\t\t<form method="post" action="/api/redirect" id="login_form">\n\t\t\t\t\t<input name="username" autocapitalize="off" autocorrect="off" required="required" class="email-input input-template"  autocomplete="on" type="email" spellcheck="false" value="" placeholder="Email"/>\n\t\t\t\t\t<input name="password" autocapitalize="off" autocorrect="off" required="required" class="password-input input-template" autocomplete="on"  type="password" spellcheck="false" value=""  placeholder="Password" />\n\t\t\t\t\t<input name="url" type="hidden" value="" />\n\t\t\t\t\t<div class="go">Log in</div>\n\t\t\t\t</form>\n        <div class="social-caption">Log in with</div>\n        <div class="social-auth" data-provider=\'facebook\'>\n          <span class="icon"></span>\n          <span class="buttonText">Facebook</span>\n        </div>\n        <div class="social-auth" data-provider=\'google\'>\n          <span class="icon"></span>\n          <span class="buttonText">Google</span>\n        </div>\n\t\t\t\t<a href="/recover/" class="link forgot">Forgot password?</a>\n\t\t\t\t<div class="error">Invalid email or password</div>\n\t\t\t</div>\n\n\n      <div class="join ljr-panel hidden">\n        <div class="header"><span>Join</span> or <a href="/login/" class="link">Log in</a></div>\n        <input autocapitalize="on"  autocorrect="off" required="required" class="fullname-input input-template for-validate"  maxlength="24" type="text"     spellcheck="false" value="" placeholder="Name" />\n        <input autocapitalize="off" autocorrect="off" required="required" class="email-input input-template for-validate"     type="email"    spellcheck="false" value="" placeholder="Email" />\n        <input autocapitalize="off" autocorrect="off" required="required" class="password-input input-template for-validate"  type="password" spellcheck="false" value="" placeholder="Password" />\n\n        <div class="checkbox-container">\n          <label>\n            <input type="checkbox" class="terms-checkbox for-validate" required="required">\n            <span class="checkmark"></span>\n          </label>\n          <p>I accept Readymag’s\n            <a href="https://readymag.com/readymag/terms-and-privacy/" target="_blank">Terms and Privacy Policy</a>\n          </p>\n        </div>\n\n\n        <div class="checkbox-container">\n          <label>\n            <input type="checkbox" class="subscribe-checkbox">\n            <span class="checkmark"></span>\n          </label>\n          <p>Кeep me updated on news and offers</p>\n        </div>\n\n\n        <div class="go">Join</div>\n\n        <div class="social-caption">Sign up with</div>\n        <div class="social-auth" data-provider=\'facebook\'>\n          <span class="icon"></span>\n          <span class="buttonText">Facebook</span>\n        </div>\n        <div class="social-auth" data-provider=\'google\'>\n          <span class="icon"></span>\n          <span class="buttonText">Google</span>\n        </div>\n      <div class="error"></div>\n\n      </div>\n\n        <div class="recover ljr-panel hidden">\n            <div class="header"><span>Reset Password</span></div>\n            <div class="wrapper">\n                <div class="info">Please enter your email address and we\'ll send you instructions:</div>\n                <input name="username" autocapitalize="off" autocorrect="off" required="required" class="email-input input-template"  autocomplete="on" type="email" spellcheck="false" value="" placeholder="Email"/>\n                <div class="go">Submit</div>\n            </div>\n            <div class="send-message">If an account exists for this email address, you will shortly get instructions for resetting your password. If you have not received such a message, please check that you have entered the same email address you used to register your Readymag account.</div>\n            <div class="go-back">Go Back</div>\n        </div>\n\n        <div class="reset ljr-panel hidden">\n            <div class="header"><span>Reset Password</span></div>\n            <input autocapitalize="off" autocorrect="off" required="required" class="new-password-input input-template"  type="password" spellcheck="false" value="" placeholder="New Password" />\n            <input autocapitalize="off" autocorrect="off" required="required" class="verify-password-input input-template"  type="password" spellcheck="false" value="" placeholder="Verify Password" />\n            <div class="go">Save</div>\n            <div class="error"></div>\n        </div>\n\n            <div class="forbidden ljr-panel hidden">\n                <div class="header"><span>Login forbidden</span></div>\n                <div class="wrapper">\n                    <div class="info">It seems Readymag is displayed as an embedded page on the third party web site. Login is disabled due to security reasons.<br/><br/>Please <a href="https://readymag.com/login" target="_blank">login or join</a> on the original Readymag page.</div>\n                </div>\n            </div>\n\n\n            <div class="close-popup"></div>\n      <a href="/" class="link go-main"></a>\n\t\t</div>\n\t</div>\n\n'])))),s(n,"template-common-login-preloader",(0,i.f)(a||(a=l(['\n    <div class="rmpreloader button">\n        <div class="arc"></div>\n    </div>\n'])))),n)},963:function(t,e,r){"use strict";r.r(e);var o=r(312),a=r(336),n=r.n(a),i=r(321),s=r(964),l=r(308),c=n().View.extend({template:s.Z["template-common-alert"],events:{"click .button":"onButtonClick",click:"hideOnBgClick","click .button.upgrade":"upgrade","click .button.cancel":"hide","click .button.close":"hide","click .button.ok":"hide","click .contact-link":"hide","click .button.resend":"resendConfirmationEmail"},initialize:function(t){i.Z.bindAll(this),i.Z.extend(this,t),this.opts=this.opts||{},this.router=this.router||RM.homepageRouter||RM.collectorRouter||RM.constructorRouter,this.router&&this.router.analytics&&this.router.analytics.sendEvent("Alert Show",{label:this.alert_source,_alert_source:this.alert_source})},render:function(){this.setElement((0,o.ZP)(this.template({opts:this.opts,readymagHost:l.Z.readymag_host}))),this.$parent&&(this.$parent instanceof Element&&(this.$parent=(0,o.ZP)(this.$parent)),this.$parent.append(this.$el).addClass("visible")),i.Z.delay(i.Z.bind((function(){this.$el.addClass("show")}),this),50),(0,o.ZP)("body").on("keyup",this.onBodyKeyUp),RM.common.disableShortcuts.alert=!0},hide:function(){delete RM.common.disableShortcuts.alert,(0,o.ZP)("body").off("keyup",this.onBodyKeyUp),this.$el.removeClass("show").addClass("hide"),i.Z.delay(i.Z.bind((function(){this.remove(),this.$parent&&this.$parent.removeClass("visible")}),this),400),this.trigger("hide",{lastButtonClicked:this.lastButtonClicked})},upgrade:function(t){Modernizr.sessionstorage&&window.sessionStorage.setItem("rm.accountUpgradeReturnUrl",window.location.pathname),this.router&&this.router.analytics&&this.router.analytics.sendEvent("Alert Upgrade",{label:this.alert_source,_alert_source:this.alert_source}),2==t.which||t.metaKey||t.ctrlKey||this.router&&this.router==RM.collectorRouter&&(this.hide(),this.router.navigate("/settings#change-plan",{trigger:!0}),t.preventDefault())},onBodyKeyUp:function(t){27==t.keyCode&&(t.stopPropagation(),t.preventDefault(),this.hide())},hideOnBgClick:function(t){(0,o.ZP)(t.target).closest(".panel").length||this.hide()},resendConfirmationEmail:function(){o.ZP.get("/auth/confirm/resend"),this.hide()},onButtonClick:function(t){var e=(0,o.ZP)(t.currentTarget).attr("data-type");this.lastButtonClicked=e}});e.default=c},1509:function(t,e,r){"use strict";r.r(e);var o=r(312),a=r(321),n=r(308),i=r(963),s=r(323),l=r(339),c=function(t){if(a.Z.bindAll(this),a.Z.extend(this,t),!RM.common.magCreationInProgress)if(this.analytics=this.router&&this.router.analytics,this.router?this.router==RM.viewerRouter?this.routerName="viewer":this.router==RM.collectorRouter?this.routerName="collector":this.router==RM.homepageRouter?this.routerName="homepage":this.router==RM.constructorRouter?this.routerName="constructor":this.routerName="unknown":this.routerName="error",this.analytics&&!this.noCreateRequestTracking&&this.analytics.sendEvent("Create Mag Request"),s.Z.isDesktop)if(Modernizr.msie||Modernizr.msie11)this.showIEPopupWarning();else if(this.me){var e="function"==typeof this.me.get?this.me.get("permissions"):this.me.permissions;this.skipPermissionsCheck||e&&e.can_create_mag?this.innerCreateMag():this.showCreatePopupWarning()}else this.showJoinForm();else this.showMobilePopupWarning()};c.prototype.innerCreateMag=function(){var t={};this.analytics&&this.analytics.sendEvent("Create Mag"),this.currentFolderId&&(t.folder=this.currentFolderId),this.sharedUser&&(t.user=this.sharedUser),RM.common.magCreationInProgress=!0,o.ZP.ajax({url:n.Z.readymag_auth_host+(this.templateID?"/api/magFromTemplate/"+this.templateID:"/api/mag/"),type:"POST",data:t,success:a.Z.bind((function(t){"function"==typeof this.success&&this.success(),RM.common.magCreationInProgress=!1,window.location.href=n.Z.readymag_auth_host+"/edit/"+t.num_id+"/contents/"}),this),error:a.Z.bind((function(){if("function"==typeof this.error&&this.error(),RM.common.magCreationInProgress=!1,console.log(arguments),alert("Creating project problem. Contact tech support, please: "+n.Z.SUPPORT_MAIL),this.me){var t="function"==typeof this.me.get?this.me.get("uri"):this.me.uri;t&&(window.location.href=n.Z.readymag_auth_host+"/"+t)}}),this)})},c.prototype.showCreatePopupWarning=function(){i.default&&new i.default({$parent:(0,o.ZP)("body > .popups"),router:this.router,opts:{type:"type-create"},alert_source:"create mag"}).render()},c.prototype.showMobilePopupWarning=function(){i.default&&new i.default({$parent:(0,o.ZP)("body > .popups"),router:this.router,opts:{type:"type-switch-desktop-create"},alert_source:"create mag mobile"}).render()},c.prototype.showIEPopupWarning=function(){i.default&&new i.default({$parent:(0,o.ZP)("body > .popups"),router:this.router,opts:{type:"type-browsers"}}).render()},c.prototype.showJoinForm=function(){l.default.saveJoinData(),window.location.href="".concat(n.Z.readymag_host,"/auth/join").concat(this.templateID?"?template="+this.templateID:"")},e.default=c},1507:function(t,e,r){"use strict";r.r(e);var o=r(312),a=r(336),n=r.n(a),i=r(321),s=r(1269),l=r.n(s),c=r(339),p=r(308),u=r(1508),d=r(1509),h=r(323),g=n().View.extend({events:{"click .link":"link","click .close-popup":"closePopup","input .login.ljr-panel input.password-input":"onPasswordInput","keydown .login.ljr-panel input":"loginInputKey","click .login.ljr-panel .go":"tryLogin","submit .login.ljr-panel #login_form":"onLoginFormSubmit","click .login.ljr-panel .social-auth":"socialAuth","input .join.ljr-panel input.password-input":"onPasswordInput","keydown .join.ljr-panel input":"joinInputKey","click .join.ljr-panel .go":"createAccount","click .join.ljr-panel .social-auth":"socialAuth","click .join.ljr-panel label .checkmark":"changeCheckboxState","keyup .join.ljr-panel input.for-validate":"validateForm","click .recover.ljr-panel .go":"sendRecoverRequest","click .recover.ljr-panel .go-back":"backFromRecover","input .reset.ljr-panel input":"onPasswordInput","click .reset.ljr-panel .go":"resetPassword","click .login-popup-wrapper":"closeOutsideClick",touchstart:"onTouchStart",touchmove:"onTouchMove"},ERROR_MESSAGES:{invalid_email:"Not a valid email",min:"At least 8 characters long",letters:"Password must include letters",oneOf:"The same as email",password_dont_match:"Passwords don't match"},defaultErrorMessageHTML:'An error has occured. Please contact our support: <a href="mailto:'.concat(p.Z.SUPPORT_MAIL,'">').concat(p.Z.SUPPORT_MAIL,"</a>."),initialize:function(t){i.Z.bindAll(this),i.Z.extend(this,t),i.Z.extend(this.ERROR_MESSAGES,this.errorMessages),this.template=u.Z["template-common-login"],this.template_button_preloader=u.Z["template-common-login-preloader"],this.logged=!1,this.animationSpeed=0,this.disableAnimations||i.Z.delay(i.Z.bind((function(){this.animationSpeed=300}),this),100),this.enableCors(),(0,o.ZP)(window).on("message",this.processLoginMessages)},render:function(){this.setElement(this.$node||(0,o.ZP)(this.template({})).appendTo(this.$container)),this.disableScrollWatcher=!!this.$node,this.setElement(this.$el),this.rendered=!0,this.$nameInput=this.$(".join.ljr-panel .fullname-input"),this.$emailInput=this.$(".join.ljr-panel .email-input"),this.$pswInput=this.$(".join.ljr-panel .password-input"),this.$termsCheckbox=this.$(".join.ljr-panel .terms-checkbox"),this.$joinButton=this.$(".join.ljr-panel .go");var t=c.default.queryUrlGetParam("email");t&&this.$(".email-input").val(t)},showError:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultErrorMessageHTML;this.$(".join.ljr-panel .error").html(t)},clearErrors:function(){this.$(".join.ljr-panel .error").html("")},link:function(t){if(t.stopPropagation(),2!==t.which&&!t.metaKey&&!t.ctrlKey){var e=(0,o.ZP)(t.currentTarget).attr("href");if(!e)return!1;if(!this.useNavigate)return/login/i.test(e)&&this.switchTo("login"),/join/i.test(e)&&this.switchTo("join"),/recover/i.test(e)&&this.switchTo("recover"),!1;this.router.navigate(e,{trigger:!0}),t.preventDefault()}},closePopup:function(){(0,o.ZP)("#homepage-main-project__root-link")&&(0,o.ZP)("#homepage-main-project__root-link")[0]&&(0,o.ZP)("#homepage-main-project__root-link")[0].click()},changeCheckboxState:function(t){var e=(0,o.ZP)(t.target).siblings("input[type='checkbox']");e.is(":checked")?e.prop("checked",!1):e.prop("checked",!0),(0,o.ZP)(t.target).toggleClass("checked"),(0,o.ZP)(t.target).parent().siblings("p").toggleClass("checked"),this.validateForm(),t.preventDefault()},validateForm:function(){""!==this.$nameInput.val()&&this.$pswInput.is(":valid")&&this.$emailInput.is(":valid")&&this.$termsCheckbox.is(":checked")?this.$joinButton.addClass("active"):this.$joinButton.removeClass("active")},closeOutsideClick:function(t){h.Z.isDesktop&&(0,o.ZP)(t.target).hasClass("login-popup-wrapper")&&this.closePopup()},show:function(t){this.shown||((0,o.ZP)("body").addClass("disable-scroll"),this.urlToBack=t,0===this.animationSpeed&&this.$el.flashClass("no-animation",15),this.$el.removeClass("hidden"),this.trigger("shown"),this.shown=!0,(0,o.ZP)("body").on("keyup",this.onBodyKeyUp),this.onResize())},hide:function(t){this.shown&&(this.$el.addClass("hidden"),i.Z.delay((function(){(0,o.ZP)("body").removeClass("disable-scroll")}),this.animationSpeed),this.trigger("hidden",t),this.shown=!1,(0,o.ZP)("body").off("keyup",this.onBodyKeyUp),this.onResize())},onBodyKeyUp:function(t){27===t.keyCode&&this.closePopup()},switchTo:function(t){var e=this.$(".ljr-panel."+t),r=window.matchMedia("(max-width: 768px)").matches,o=e.siblings(".ljr-panel"),a=("recover"===t||"login"===t)&&".dop-container-join"===this.$el.selector&&r;"recover"===t&&this.$(".recover.ljr-panel .email-input").val(this.$(".login.ljr-panel .email-input").val()),e.removeClass("hidden"),h.Z.isDesktop&&setTimeout((function(){e.find("input").eq(0).focus()}),0),this.disableAnimations?(o.addClass("hidden"),a&&RM.viewerRouter.mag.onResize()):i.Z.delay((function(){o.addClass("hidden"),a&&RM.viewerRouter.mag.onResize()}),this.animationSpeed/4),this.onResize()},onResize:function(){(0,o.ZP)(window).width()<=768&&this.$(".login").hasClass("hidden")&&this.$(".login-popup-wrapper").css("height",652),(0,o.ZP)(window).width()<=768&&this.$(".join").hasClass("hidden")&&this.$(".login-popup-wrapper").css("height",466)},showButtonPreloader:function(t){var e,r,a,n=t.width(),i=t.height();e=(0,o.ZP)(this.template_button_preloader()),t.append(e),t.css({color:"transparent","background-image":"none"}),t.addClass("processing"),r=e.width(),a=e.height(),e.css({left:Math.floor((n-r)/2),top:Math.floor((i-a)/2)})},hideButtonPreloader:function(t){t.find(".rmpreloader").remove(),t.css({color:"","background-image":""}),t.removeClass("processing")},loginInputKey:function(t){13===t.keyCode&&this.tryLogin()},tryLogin:function(){var t=this,e=o.ZP.trim(this.$(".login.ljr-panel .email-input").val()),r=this.$(".login.ljr-panel .password-input").val(),a=this.$(".login.ljr-panel .go"),n=c.default.queryUrlGetParam("redirect");a.hasClass("processing")||""!==e&&""!==r&&(this.showButtonPreloader(a),this.requestLogin(e,r,(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Please check that you have entered your login and password correctly.";if(e&&e.redirect)return window.location.href=e.redirect;if(e){if(n)return window.location.href=p.Z.readymag_auth_host+n;if(t.logged=!0,c.default.saveJoinData("native"),t.createMagParams)return t.redirectAfterJoin(e.uri);var o=Modernizr.sessionstorage&&window.sessionStorage.getItem("rm.loginReturnUrl",window.location.pathname);Modernizr.sessionstorage&&window.sessionStorage.removeItem("rm.loginReturnUrl"),t.$('.login.ljr-panel #login_form input[name="url"]').val(p.Z.readymag_auth_host+(o||"/"+e.uri)),t.$(".login.ljr-panel #login_form").submit()}else t.hideButtonPreloader(a),clearTimeout(t.wrongTimeout),t.$(".login.ljr-panel").addClass("wrong-login"),t.$(".login.ljr-panel .error").html(r),t.wrongTimeout=setTimeout(i.Z.bind((function(){this.$(".login.ljr-panel").removeClass("wrong-login")}),t),3500),t.isdesktop||t.$el.scrollTop(9999)})))},requestLogin:function(t,e,r){var a,n=this,i={pass:l()(e)};return i[t.match(/@/)?"email":"uri"]=t,this.clearErrors(),a=p.Z.readymag_auth_host+"/api/user/?timestamp="+(new Date).getTime(),o.ZP.post(a,i,(function(t){r&&r(t)})).error((function(t){r&&r(null,404===t.status?void 0:n.defaultErrorMessageHTML)})),!1},onLoginFormSubmit:function(){return this.logged},showErrors:function(t){clearTimeout(this.wrongTimeout),this.$(".join.ljr-panel").addClass("wrong-join"),this.showError(Array.isArray(t)?t.join(" <br/>"):t),this.wrongTimeout=setTimeout(i.Z.bind((function(){this.$(".join.ljr-panel").removeClass("wrong-join")}),this),2e3)},redirectHandler:function(t,e,r){if(t)return window.location.href=t,!0;this.redirectAfterJoin(e.uri,r)},createAccount:function(){var t=this;if(!this.$(".join.ljr-panel input").hasClass("err")&&this.$joinButton.hasClass("active")){var e,r,a,n,s={email:this.$emailInput.val(),name:o.ZP.trim(this.$(".join.ljr-panel .fullname-input").val()),pass:this.$pswInput.val(),page:window.location.pathname,subscribe:this.$(".join.ljr-panel .subscribe-checkbox").is(":checked")},u=this.$joinButton,d=c.default.queryUrlGetParam("redirect");if(this.clearErrors(),!u.hasClass("processing")&&""!==s.name&&""!==s.email&&""!==s.pass){c.default.isValidEmail(s.email)||(e=!0,a=s.email,this.$emailInput.prop("type","text").addClass("err").val(this.ERROR_MESSAGES.invalid_email));var h=this.getPasswordErrors(s.pass,[s.email]);if(h.length&&(r=!0,n=s.pass,this.$pswInput.prop("type","text").addClass("err").val(this.ERROR_MESSAGES[h[0]])),(e||r)&&(clearTimeout(this.showErrorTimeout),this.showErrorTimeout=setTimeout(i.Z.bind((function(){e&&this.$emailInput.removeClass("err").prop("type","email").val(a),r&&this.$pswInput.removeClass("err").prop("type","password").val(n)}),this),3e3)),!e&&!r){this.showButtonPreloader(u),this.router.analytics.sendEvent("Join","General"),s.pass=l()(s.pass);var g=p.Z.readymag_auth_host+"/api/register";o.ZP.ajax({type:"POST",data:s,url:g,success:function(e){c.default.saveJoinData("native"),t.redirectHandler(d,e,u)},error:function(e){var r;t.hideButtonPreloader(u),403===e.status?r="User with email ".concat(s.email," already exists. Forgot your password?"):406===e.status&&(r="Name must not contain links."),t.showError(r)}})}}}},joinInputKey:function(t){13===t.keyCode&&this.createAccount()},sendRecoverRequest:function(){var t=this.$(".recover.ljr-panel .email-input").val(),e=this.$(".recover.ljr-panel .go");e.hasClass("processing")||c.default.isValidEmail(t)&&(this.showButtonPreloader(e),this.requestRecover(t,i.Z.bind((function(){this.hideButtonPreloader(e),this.$(".recover.ljr-panel").addClass("request-sended")}),this)))},requestRecover:function(t,e){var r;this.clearErrors(),r=p.Z.readymag_auth_host+"/api/recoverypass",o.ZP.post(r,{email:t},e).error((function(t){404===t.status?e&&e():this.showError()}))},backFromRecover:function(){this.useNavigate?this.router.navigate("login/",{trigger:!0}):this.switchTo("login")},resetPassword:function(){var t=this,e=o.ZP.trim(this.$(".reset.ljr-panel .new-password-input").val()),r=o.ZP.trim(this.$(".reset.ljr-panel .verify-password-input").val()),a=window.ServerData.recover,n=[],s=this.$(".reset.ljr-panel .go");if(!s.hasClass("processing")&&""!==e&&""!==r){if(e!==r&&n.push(this.ERROR_MESSAGES.password_dont_match),this.getPasswordErrors(e).forEach((function(e){return n.push(t.ERROR_MESSAGES[e])})),n.length)return clearTimeout(this.wrongTimeout),this.$(".reset.ljr-panel").addClass("wrong-reset"),this.$(".reset.ljr-panel .error").html(n.join(" <br/>")),void(this.wrongTimeout=setTimeout(i.Z.bind((function(){this.$(".reset.ljr-panel").removeClass("wrong-reset")}),this),2e3));a&&a.recover_code&&a.email&&(this.showButtonPreloader(s),o.ZP.ajax({type:"POST",data:{email:a.email,pass:l()(e),code:a.recover_code},url:p.Z.readymag_auth_host+"/api/changepass",success:function(){window.location.href="/auth/login/"},error:i.Z.bind((function(){this.hideButtonPreloader(s),this.showError()}),this)}))}},onPasswordInput:function(t){var e=(0,o.ZP)(t.currentTarget);c.default.filterNonAscii(e)&&(e.addClass("error-input"),i.Z.defer(i.Z.bind((function(){e.removeClass("error-input")}),this)))},socialAuth:function(t){var e=this;this.$button=(0,o.ZP)(t.currentTarget);var r=this.$button.attr("data-provider"),a=p.Z.readymag_auth_host+"/api/auth/"+r;if(!this.$button.hasClass("processing")){this.showButtonPreloader(this.$button),this.$button.closest(".join.ljr-panel").length&&this.router.analytics&&this.router.analytics.sendEvent("Join","General ".concat(r));var n=screen.width,i=screen.height,s=Math.min(1e3,n),l=Math.min(700,i-40),c=Math.ceil((n-s)/2),u=Math.ceil((i-l)/2);this.socialAuthWindow=window.open(a,"_blank",["toolbar=no","location="+(window.opera?"no":"yes"),"directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no","width="+s,"height="+l,"top="+u,"left="+c].join()),this.authInProgress=!0,this.popupCheckInterval=setInterval((function(){e.socialAuthWindow&&!e.socialAuthWindow.closed||(e.authInProgress=!1,clearInterval(e.popupCheckInterval),e.hideButtonPreloader(e.$button))}),100)}},handleSocialAuthResult:function(t){var e,r=this;if(this.authInProgress=!1,!t||t.error||!t.user||!t.user.uri)return this.hideButtonPreloader(this.$button),t.error&&(this.$el.scrollTop(this.$el[0].scrollHeight-this.$el.outerHeight()),this.showErrors(["Something went wrong"]),clearTimeout(this.showSocialErrorTimeout),this.showSocialErrorTimeout=setTimeout((function(){r.clearErrors()}),4e3)),void(t.user&&t.user.name&&(this.switchTo("join"),this.$(".join.ljr-panel .fullname-input").val(t.user.name),this.$(".join.ljr-panel .email-input").focus()));if(t.user.createdViaFacebook&&(e="facebook"),t.user.createdViaGoogle&&(e="google"),e)c.default.saveJoinData(e),this.redirectAfterJoin(t.user.uri,this.$button);else{var o=c.default.queryUrlGetParam("redirect");if(o)return window.location.href=p.Z.readymag_auth_host+o;window.location.href=p.Z.readymag_auth_host+"/"+t.user.uri}},processLoginMessages:function(t){if(this.authInProgress){var e=t.originalEvent||{};if(e.origin===p.Z.readymag_auth_host){var r=JSON.parse(decodeURIComponent(e.data));r&&"social-auth"===r.event&&(clearInterval(this.popupCheckInterval),this.socialAuthWindow&&this.socialAuthWindow.close(),this.handleSocialAuthResult(r.message))}}},redirectAfterJoin:function(t){var e=i.Z.isFunction(this.joinCallback)?500:0;i.Z.isFunction(this.joinCallback)&&this.joinCallback();var r=c.default.queryUrlGetParam("redirect");if(r)return window.location.href=p.Z.readymag_auth_host+r;setTimeout(i.Z.bind((function(){var e=p.Z.readymag_auth_host+"/"+t+"/";if(!h.Z.isDesktop||Modernizr.msie||Modernizr.msie11)window.location.href=e;else{var r=Modernizr.sessionstorage&&window.sessionStorage.getItem("rm.loginReturnUrl",window.location.pathname);if(Modernizr.sessionstorage&&window.sessionStorage.removeItem("rm.loginReturnUrl"),r)return window.location.href=p.Z.readymag_auth_host+r;var o=this.createMagParams,a=o&&o.templateID,n=o&&o.tp?o.tp+"-join-form":"join-form";new d.default({router:this.router,me:{permissions:{can_create_mag:!0},uri:t},tp:n,templateID:a,noCreateRequestTracking:o&&o.noCreateRequestTracking,error:i.Z.bind((function(){this.hideButtonPreloader(this.$button)}),this)})}}),this),e)},enableCors:function(){o.ZP.ajaxPrefilter((function(t){-1!==t.url.indexOf(p.Z.readymag_auth_host)&&(t.xhrFields={withCredentials:!0})}))},onTouchStart:function(t){this.disableScrollWatcher||(this.scrollY=t.originalEvent.touches.item(0).clientY)},onTouchMove:function(t){if(!this.disableScrollWatcher){var e=(0,o.ZP)(t.currentTarget),r=this.scrollY-t.originalEvent.touches.item(0).clientY;(r<0&&e.scrollTop()<=0||r>0&&e.scrollTop()+e.height()>=e[0].scrollHeight)&&t.preventDefault(),this.scrollY=t.originalEvent.touches.item(0).clientY}},destroy:function(){this.hide(),(0,o.ZP)(window).off("message",this.processLoginMessages),setTimeout(i.Z.bind((function(){this.$el.remove()}),this),400)},getPasswordErrors:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return t.length<8&&r.push("min"),e.includes(t)&&r.push("oneOf"),/[a-zA-Z]+/.test(t)||r.push("letters"),r}});e.default=g}}]);