(self.webpackChunkrm_frontend=self.webpackChunkrm_frontend||[]).push([[43],{1416:function(t,e,i){"use strict";var r,n,a,s,o,l,d=i(351);function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function h(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}e.Z=(c(l={},"template-constructor-block-twitter-type_tweet",(0,d.f)(r||(r=h(['\n\t<a href="https://twitter.com/share" class="twitter-share-button" data-url="<%-url%>" data-lang="en" data-size="<%=large_button ? \'large\' : \'medium\'%>" data-text="<%- typeof text !== \'undefined\' ? text : \'\'%>">Tweet</a>\n\t<div class="overlay"></div>\n'])))),c(l,"template-constructor-block-twitter-type_follow",(0,d.f)(n||(n=h(['\n\t<a href="https://twitter.com/<%-username ? username : \'Readymag\'%>" class="twitter-follow-button" data-show-count="false" data-show-screen-name="<%=show_name ? \'true\' : \'false\'%>" data-lang="en" data-size="<%=large_button ? \'large\' : \'medium\'%>">Follow @<%-username%></a>\n\t<div class="overlay"></div>\n'])))),c(l,"template-constructor-block-twitter-type_hashtag",(0,d.f)(a||(a=h(['\n\t<a href="https://twitter.com/intent/tweet?button_hashtag=<%-hash%>" class="twitter-hashtag-button" data-size="<%=large_button ? \'large\' : \'medium\'%>">Tweet #<%-hash%></a>\n\t<div class="overlay"></div>\n'])))),c(l,"template-constructor-block-twitter-type_timeline",(0,d.f)(s||(s=h(['\n\t<%=code%>\n\t<div class="overlay"></div>\n'])))),c(l,"template-constructor-block-twitter-type_embed",(0,d.f)(o||(o=h(['\n\t<%=code%>\n\t<div class="overlay"></div>\n'])))),l)},1415:function(t,e,i){"use strict";i.r(e);var r=i(321),n=i(1381),a=i(1123),s=i(340),o=i(1416),l=n.Z.extend({CONTENT_WAIT_TICK:100,CONTENT_WAIT_MAX_TICKS:20,CONTENT_IMG_WAIT:1e3,DO_NOT_WAIT_FOR_PRELOAD:!0,render:function(){var t,e;return this.makeBox("widget-twitter"),this.rendered=!0,this.current_type?("mag"===(e=this[this.current_type]).use_own_url?e.url=this.page.mag.getUrl():"page"!==e.use_own_url&&e.url||(e.url=this.page.getUrl()),RM.screenshot||(e.text=a.getFinalShare(this.page,r.Z.extend(this.page.mag.model.toJSON(),{user:this.page.mag.user}),{forProject:"mag"===e.use_own_url,customDomain:RM.common.isDomainViewer}).tweet),t=o.Z["template-constructor-block-twitter-"+this.current_type],this.$el.html(t(e)),"type_timeline"===this.current_type&&this.$el.find("a").attr({width:this.w,height:this.h}),s.Z.initTwitterAPI(function(){this.destroyed||(window.twttr&&window.twttr.widgets&&r.Z.isFunction(window.twttr.widgets.load)&&window.twttr.widgets.load(),(0,r.Z)(["type_timeline","type_embed"]).contains(this.current_type)?this.waitForTwitterContent():this.widgetIsLoaded())}.bind(this)),this):(this.widgetIsLoaded(),this)},waitForTwitterContent:function(){var t,e,i,n=0,a=!1,s={type_timeline:".timeline-Widget",type_embed:"blockquote.tweet"};clearInterval(t),t=setInterval(r.Z.bind((function(){n++,this.destroyed?clearInterval(t):(1==(e=this.$el.find("iframe")).length&&(i=s[this.current_type],a=e.contents().find(i).length>0),(a||n>this.CONTENT_WAIT_MAX_TICKS)&&("type_embed"==this.current_type&&e.css({margin:0,"max-width":"100%"}),"type_timeline"==this.current_type&&(console.log("$frame : ",e),e.css({width:"100%",height:"100%!important","max-width":"100%"})),clearInterval(t),setTimeout(r.Z.bind((function(){this.widgetIsLoaded()}),this),this.CONTENT_IMG_WAIT)))}),this),this.CONTENT_WAIT_TICK)}});e.default=l}}]);